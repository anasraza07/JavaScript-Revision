<!DOCTYPE html>
<html>

<head>
    <title>App</title>
</head>

<body>
    <button onclick="
        messages++;
        displayNotification();
        ">Add</button>
    <button onclick="
        if(messages > 0){
            messages--;
            if(messages === 0){
                stopNotification();
            }
        };
    ">Remove</button>
    <h1>Challenge 12</h1>
    <button onclick="
        displayMessage();
    ">Add to cart</button>
    <p class="js-added-cart"></p>

    <script>
        let timeoutId;
        function displayMessage() {
            const addedCartElement = document.querySelector('.js-added-cart');
            addedCartElement.innerHTML = 'Added';

            clearTimeout(timeoutId);

            timeoutId = setTimeout(function () {
                addedCartElement.innerHTML = '';
            }, 2000);
        };

        let messages = 2;
        let intervalId;
        let isDisplayingNotification;

        displayNotification();

        function displayNotification() {
            if (isDisplayingNotification) {
                return;
            }

            isDisplayingNotification = true;

            intervalId = setInterval(function () {
                if (document.title === 'App') {
                    document.title = `(${messages}) New messages`;
                } else {
                    document.title = 'App';
                };
            }, 1000);
        }

        function stopNotification() {
            isDisplayingNotification = false;

            clearInterval(intervalId);
            document.title = 'App';
        };
    </script>
</body>

</html>