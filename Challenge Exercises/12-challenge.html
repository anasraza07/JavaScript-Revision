<!DOCTYPE html>
<html>

<head>
    <title>App</title>
</head>

<body>
    <button class="js-add-button">Add</button>
    <button class="js-remove-button">Remove</button>
    <h1>Challenge 12</h1>
    <button class="js-add-cart-button">Add to cart</button>
    <p class="js-added-cart"></p>

    <script>
        document.querySelector('.js-add-cart-button').addEventListener('click', () => {
            displayMessage();
        });

        let timeoutId;
        function displayMessage() {
            const addedCartElement = document.querySelector('.js-added-cart');
            addedCartElement.innerHTML = 'Added';

            clearTimeout(timeoutId);

            timeoutId = setTimeout(() => {
                addedCartElement.innerHTML = '';
            }, 2000);
        };

        document.querySelector('.js-add-button').addEventListener('click', () => {
            messages++;
            displayNotification();
        });

        document.querySelector('.js-remove-button').addEventListener('click', () => {
            if (messages > 0) {
                messages--;
                if (messages === 0) {
                    stopNotification();
                }
            };
        })

        let messages = 2;
        let intervalId;
        let isDisplayingNotification;

        displayNotification();


        function displayNotification() {
            if (isDisplayingNotification) {
                return;
            }

            isDisplayingNotification = true;

            intervalId = setInterval(() => {
                if (document.title === 'App') {
                    document.title = `(${messages}) New messages`;
                } else {
                    document.title = 'App';
                };
            }, 1000);
        }

        function stopNotification() {
            isDisplayingNotification = false;

            clearInterval(intervalId);
            document.title = 'App';
        };
    </script>
</body>

</html>